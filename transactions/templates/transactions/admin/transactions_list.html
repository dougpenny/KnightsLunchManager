{% extends "web/admin/base_admin.html" %}
{% load static %}

{% block head-scripts %}
<script src="https://cdn.jsdelivr.net/combine/npm/vue@2,npm/vue-tailwind@1"></script>
{% endblock %}

{% block admin-content %}
<h3 class="ml-8 mt-12 text-2xl leading-6 font-medium text-gray-700">
  {% if filter == "deposits" %}
    Deposits
  {% elif filter == "orders" %}
    Orders
  {% else %}
    Transactions
  {% endif %}
</h3>
<div class="mx-8 mt-6 flex items-center justify-between">

<span class="relative z-0 inline-flex shadow-sm rounded-md">

{% if previous_day %}
  {% if filter == "deposits" %}
    <a href="{% url 'transaction-date-deposits' previous_day.year previous_day.month previous_day.day %}">
  {% elif filter == "orders" %}
    <a href="{% url 'transaction-date-orders' previous_day.year previous_day.month previous_day.day %}">
  {% else %}
    <a href="{% url 'transaction-date-list' previous_day.year previous_day.month previous_day.day %}">
  {% endif %}
  <button type="button" title="{{ previous_day|date:'l, M jS' }}" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150" aria-label="Previous">
    <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
    </svg>
  </button>
  </a>
{% endif %}
{% if previous_day or next_day %}
  {% if not previous_day%}
  <span class="-ml-px relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700">
  {% elif not next_day %}
  <span class="-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700">
  {% else %}
  <span class="-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-700">
  {% endif %}
    {% if today.date == day %}
      Today
    {% else %}
      {{ day|date:'l, M jS' }}
    {% endif %}
  </span>
{% endif %}
{% if next_day %}
  {% if filter == "deposits" %}
    <a href="{% url 'transaction-date-deposits' next_day.year next_day.month next_day.day %}">
  {% elif filter == "orders" %}
    <a href="{% url 'transaction-date-orders' next_day.year next_day.month next_day.day %}">
  {% else %}
    <a href="{% url 'transaction-date-list' next_day.year next_day.month next_day.day %}">
  {% endif %}
  <button type="button" title="{{ next_day|date:'l, M jS' }}" class="-ml-px relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150" aria-label="Next">
    <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
    </svg>
  </button>
  </a>
{% endif %}
</span>
</div>
        <div class="mt-4 flex flex-col">
          {% include 'web/includes/messages.html' %}
          {% if object_list %}
            <div x-data="confirmAction()" class="-my-2 py-2 overflow-x-auto sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8">
              <div class="align-middle inline-block min-w-full overflow-hidden border-b border-gray-200">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead>
                    <tr>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                        Name
                      </th>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-center text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                        Grade
                      </th>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                        Description
                      </th>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-center text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                        Amount
                      </th>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-center text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                        Status
                      </th>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                        Submitted
                      </th>
                      <th class="px-6 py-3 border-b border-gray-200 bg-gray-50">
                      &nbsp;
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-gray-200">
                  <div id="app">
                    {% for transaction in object_list %}
                      <tr>
                        <td class="px-6 py-4 text-left border-b border-gray-200 text-sm leading-5 text-gray-900">
                          <a class="text-indigo-700 hover:underline" href="{% url 'profile-detail' transaction.transactee.pk %}">{{ transaction.transactee }}</a>
                        </td>
                        <td class="px-6 py-4 text-center border-b border-gray-200 text-sm leading-5 text-gray-900">
                          {% if transaction.transactee.role == 2 %}
                            {{ transaction.transactee.grade_level }}
                          {% else %}
                            Staff
                          {% endif %}
                        </td>
                        <td class="px-6 py-4 text-left border-b border-gray-200 text-sm leading-5 text-gray-900">
                          {{ transaction.description }}
                        </td>
                        <td class="px-6 py-4 whitespace-no-wrap text-center border-b border-gray-200 text-sm leading-5 text-gray-900">
                          ${{ transaction.amount }}
                        </td>
                        <td class="px-6 py-4 whitespace-no-wrap text-center text-sm leading-5 text-cool-gray-500 md:bloc">
                            <span class="px-2.5 py-0.5 inline-flex text-xs leading-4 font-medium rounded-full 
                            {% if transaction.status == 'Complete' %}bg-green-100 text-green-800
                            {% elif transaction.status == 'Processing' %}bg-yellow-100 text-yellow-800
                            {% elif transaction.status == 'Submitted' %}bg-blue-100 text-blue-800
                            {% else %}bg-gray-100 text-gray-800{% endif %}">
                              {{ transaction.status }}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-no-wrap text-left border-b border-gray-200 text-sm leading-5 text-gray-900">
                          {{ transaction.submitted }}
                        </td>
                        <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
                            <div class="mx-auto flex-shrink-0 flex items-center justify-center h-20 w-20 sm:mx-0 sm:h-10 sm:w-10">
                            <button @click="toggleModal()">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-red-600" viewBox="-8 -8 40 40" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z"/>
                                <line x1="4" y1="7" x2="20" y2="7" />
                                <line x1="10" y1="11" x2="10" y2="17" />
                                <line x1="14" y1="11" x2="14" y2="17" />
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                              </svg>
                            </button>
                            <t-modal name="modalConfirm" header="Title of the modal">
                              Content of the modal.
                              <template v-slot:footer>
                                <div class="flex justify-between">
                                  <t-button type="button">
                                    Cancel
                                  </t-button>
                                  <t-button type="button">
                                    Ok
                                  </t-button>
                                </div>
                              </template>
                            </t-modal>

                            <!--<a href="{% url 'transaction-deposit-detail' transaction.pk %}">
                            <button>
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-600 mx-4" viewBox="-8 -8 40 40" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z"/>
                                <path d="M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3" />
                                <path d="M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3" />
                                <line x1="16" y1="5" x2="19" y2="8" />
                              </svg>
                            </button>
                            </a>
                            -->
                            </div>
                        </td>
                      </tr>
                    {% endfor %}
                    </div>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="mx-8 mt-12 flex items-center justify-between">
            <span class="inline-flex">
</span>
{% if filter == "deposits" %}
    <div class="mt-8 flex flex-shrink-0 sm:mt-0">
      <div class="inline-flex rounded-md shadow">
        <a href="{% if day %}{% url 'transaction-date-export-checks' day.year day.month day.day %}{% else %}{% url 'transaction-export-checks' %}{% endif %}">
        <button class="inline-flex items-center justify-center pl-4 pr-5 py-2 border border-transparent text-base leading-6 rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
          <svg xmlns="http://www.w3.org/2000/svg" class="mr-4" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z"/>
            <path d="M14 3v4a1 1 0 0 0 1 1h4" />
            <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
            <line x1="12" y1="11" x2="12" y2="17" />
            <polyline points="9 14 12 17 15 14" />
          </svg>
          <span>Export Deposits</span>
        </button>
        </a>
      </div>
    </div>
  {% elif filter == "orders" and day %}
    <div class="mt-8 flex flex-shrink-0 sm:mt-0">
      <div class="inline-flex rounded-md shadow">
        <a href="{% url 'transaction-date-process' day.year day.month day.day %}">
        <button class="inline-flex items-center justify-center pl-4 pr-5 py-2 border border-transparent text-base leading-6 rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
          <svg xmlns="http://www.w3.org/2000/svg" class="mr-4" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z"/>
            <path d="M14 3v4a1 1 0 0 0 1 1h4" />
            <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
            <path d="M9 15l2 2l4 -4" />
          </svg>
          <span>Process Orders</span>
        </button>
        </a>
      </div>
    </div>
  {% endif %}
</div>

          {% else %}
          <h3 class="w-full text-center mt-14 text-lg font-medium text-gray-700 sm:text-3xl">
          {% if filter == "deposits" %}
              There are no deposits for {% if today.date == day %}today{% else %}{{ day|date:'l, M jS' }}{% endif %}.
          {% elif filter == "orders" %}
              There are no orders for {% if today.date == day %}today{% else %}{{ day|date:'l, M jS' }}{% endif %}.
          {% else %}
              There are no transactions for {% if today.date == day %}today{% else %}{{ day|date:'l, M jS' }}{% endif %}.
          {% endif %}
          </h3>
          {% endif %}
        </div>

{% endblock %}

{% block end-scripts %}
<script>
new Vue({
  el: "#app",
  components: { t-modal: VueTailwind.tModal },
  methods: {
    openModal() {
      console.log("show the modal")
    }
  }
});
</script>
{% endblock %}